"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[462],{47545:function(e,n,t){var o=t(43423);const{fleetConfig:r,mode:a}=window.viewerModel,s=new URLSearchParams(window.location.search),i=s.has("localPerformanceTool"),c=s.get("localPerformanceTool"),p=i?`http://localhost:${""===c?"3000":c}/`:"https://apps.wix.com/tb-performance-tool",m=({openPerformanceToolWindow:e,performanceEntries:n,components:t})=>{window.addEventListener("message",(async o=>{"opened"===o.data&&e.postMessage({type:"performanceData",data:JSON.parse(JSON.stringify(n)),components:t,siteModels:await fetch(`${location.href.split("?")[0]}?dumpSiteModel=true`).then((e=>e.json()))},"*")}))};if(a.debug||"Canary"===r.type||window.location.search.includes("performanceTool=true")){const e=[];new PerformanceObserver((function(n){const t=n.getEntries();e.push(...t)})).observe({entryTypes:["longtask"]}),window.openPerformanceTool=async()=>{const n=await o.platformWorkerPromise,t=window.open(p,"_blank"),r=window.performance.getEntries(),a=e.map((e=>({duration:e.duration,startTime:e.startTime,entryType:e.entryType,name:`long task: ${e.attribution[0].containerId}, ${e.attribution[0].containerName}, ${e.attribution[0].containerSrc}`})));r.push(...a);const{ssrEvents:s,components:i}=d();if(s.length>0){const e=window.performance.timing.connectStart,n=n=>n-e;r.push(...s.map((e=>JSON.parse(JSON.stringify({name:e.name,entryType:"SSR",startTime:n(e.startTime),duration:0})))))}n?(n.addEventListener("message",(e=>{var n;if("workerPerformanceData"===(null===(n=e.data)||void 0===n?void 0:n.type)){const n=e.data.data.performanceEntries,o=e.data.data.workerStartTime-window.performance.timeOrigin;n.forEach((e=>{e.startTime=e.startTime+o,e.worker="WORKER"})),r.push(...n),m({openPerformanceToolWindow:t,performanceEntries:r,components:i})}})),n.postMessage({type:"PerformanceTool"})):m({openPerformanceToolWindow:t,performanceEntries:r,components:i})}}const d=()=>{var e,n;const{ssrEvents:t,components:o}=JSON.parse((null===(e=document.getElementById("wix-warmup-data"))||void 0===e?void 0:e.textContent)||"{}"),r=JSON.parse((null===(n=document.getElementById("wix-head-performance-data"))||void 0===n?void 0:n.textContent)||"[]"),a=[];return r&&a.push(...r),t&&a.push(...t),{ssrEvents:a,components:o}}}},function(e){e.O(0,[9448],(function(){return n=47545,e(e.s=n);var n}));e.O()}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/ab-test-compilation/openPerformanceTool.62696625.bundle.min.js.map